<!DOCTYPE html>
<html lang="en">
  <!-- Beautiful Jekyll | MIT license | Copyright Dean Attali 2016 -->
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>Diagnosing LAN Speeds</title>

  <meta name="author" content="Mpho Mphego" />
  <meta name="theme-color" content="#a50509">
  <meta name="description" content="Hi! I'm Mpho Mphego, a programmer, software developer. Loves to meet new people, connect, discuss, network and grow, mostly at software developers’ conferences, dev-fests and gaming meet-ups.">
  <meta name="keywords" content="Mpho , geek, linux, science, math, mathematics, raspberry pi, music, Internet of Things, research, android, ubuntu, python, docker">

  <!-- favicon -->
  <link rel="shortcut icon" type="image/x-icon" href="favicon.ico" />

  <!-- MathJax -->
  <script type="text/x-mathjax-config">MathJax.Hub.Config({messageStyle: 'none',tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});</script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
  <script type="text/x-mathjax-config">MathJax.Hub.Config({TeX: { equationNumbers: { autoNumber: "AMS" } }});</script>

  <link rel="alternate" type="application/rss+xml" title="Mpho Mphego - Welcome to the geek side!" href="/feed.xml" />

  

  
    
      
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" />

    
  

  
    
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="/css/bootstrap-social.css" />
    
      <link rel="stylesheet" href="/css/main.css" />
    
  

  
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

  

  

  

    <!-- Facebook OpenGraph tags -->
  

  
  <meta property="og:title" content="Diagnosing LAN Speeds" />
  

   
  <meta property="og:description" content="After having network issues/degradation while trying to access a work server, I had to diagnose the network the server is connected to. I had to set myself on a mission - and after realising that the seems to be very limited tools for such things, I stumbled upon 'iperf'. Iperf...">
  


  <meta property="og:type" content="website" />

  
  <meta property="og:url" content="http://localhost:4000/blog/2017/05/05/diagnosing-lan-speeds.html" />
  <link rel="canonical" href="http://localhost:4000/blog/2017/05/05/diagnosing-lan-speeds.html" />
  

  
  <meta property="og:image" content="http://localhost:4000/img/main.jpg" />
  


  <!-- Twitter summary cards -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <meta name="twitter:creator" content="@" />

  
  <meta name="twitter:title" content="Diagnosing LAN Speeds" />
  

  
  <meta name="twitter:description" content="After having network issues/degradation while trying to access a work server, I had to diagnose the network the server is connected to. I had to set myself on a mission - and after realising that the seems to be very limited tools for such things, I stumbled upon 'iperf'. Iperf...">
  

  
  <meta name="twitter:image" content="http://localhost:4000/img/main.jpg" />
  

</head>


  <body>
    
    
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
        <a class="navbar-brand" href="http://localhost:4000">Mpho Mphego</a>
      
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
          <li>
            






<a href="//resume/MphoMphego.pdf">Resume</a>
          </li>
        
        
        
          <li>
            






<a href="/tags">Tags</a>
          </li>
        
        
      </ul>
    </div>

<!-- ALways use my avatar, irrespective of the post image -->
  <div class="avatar-container">
    <div class="avatar-img-border">
      <a href="http://localhost:4000 ">
        <img class="avatar-img" src="http://localhost:4000/img/av.png" />
     </a>
    </div>
  </div>

  </div>
</nav>

    <!-- TODO this file has become a mess, refactor it -->


<div class="intro-header"></div>


<div class="container">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      

      <article role="main" class="blog-post">
        <p>After having network issues/degradation while trying to access a work server, I had to diagnose the network the server is connected to. I had to set myself on a mission - and after realising that the seems to be very limited tools for such things, I stumbled upon '<strong>iperf</strong>'.</p>
<p><strong>Iperf</strong> is a command-line tool used in the diagnostics of network speed issues, it measures the maximum network throughput a server can handle. It is particularly useful when experiencing network speed issues, as you can use Iperf to determine which server is unable to reach maximum throughput.</p>
<h2>Iperf installation</h2>
<p>Iperf must be installed on both computers you are testing the connection between.</p>
<p>[sourcecode]<br />
sudo apt-get install -y iperf<br />
[/sourcecode]</p>
<h2>TCP Clients &amp; Servers</h2>
<p>Iperf requires two systems because one system must act as a server, while the other acts as a client. The client connects to the server you’re testing the speed of.</p>
<ol>
<li>On the node you wish to test, launch Iperf in server mode:</li>
</ol>
<p>[sourcecode]<br />
iperf -s<br />
[/sourcecode]</p>
<p>You should see output similar to:</p>
<p><img class="alignnone size-full wp-image-1023" src="/assets/screenshot_2017-05-05_12-02-15.png" alt="Screenshot_2017-05-05_12-02-15" width="651" height="134" /></p>
<p>2. On your second Linode, connect to the first. Replace <code>dbelab04</code> with the first node’s IP address in my case i'm using the hostname</p>
<p>[sourcecode]<br />
iperf -c dbelab04<br />
[/sourcecode]</p>
<p>You should see output similar to:<br />
<img class="alignnone size-full wp-image-1022" src="/assets/screenshot_2017-05-05_12-02-53.png" alt="Screenshot_2017-05-05_12-02-53" width="775" height="305" /></p>
<p>3. You will also see the connection and results on your Iperf server. This will look similar to:</p>
<p><img class="alignnone size-full wp-image-1021" src="/assets/screenshot_2017-05-05_12-03-04.png" alt="Screenshot_2017-05-05_12-03-04" width="808" height="202" /></p>
<p>4. To stop the Iperf server process, press <code>CTRL + c</code>.</p>
<p>--------------------------------------------------------------------------------------------------</p>
<p>You can do pretty much the same thing with plain old <code>nc</code> (netcat) if you're that way inclined. On the server machine:<br />
[sourcecode]<br />
nc -vvlnp 12345 &gt;/dev/null<br />
[/sourcecode]</p>
<p>You should see something similar to:</p>
<p><img class="alignnone size-full wp-image-1049" src="/assets/screenshot_2017-05-05_12-14-05.png" alt="Screenshot_2017-05-05_12-14-05" width="861" height="86" /></p>
<p>And the client can pipe a 10Gb of zeros through <code>dd</code> over the <code>nc</code> tunnel.<br />
[sourcecode]<br />
dd if=/dev/zero bs=10M count=1K status=progress | nc -vvn 192.168.4.23 12345<br />
[/sourcecode]</p>
<p>You should see something similar to:</p>
<p><img class="alignnone size-full wp-image-1050" src="/assets/screenshot_2017-05-05_12-13-54.png" alt="Screenshot_2017-05-05_12-13-54" width="1138" height="90" /></p>
<p>The timing there is given by <code>dd</code> but it should be accurate enough as it can only output as fast the pipe will take it. If you're unhappy with that you could wrap the whole thing up in a <code>time</code> call.</p>
<p>Remember that the result is in mega<em>bytes</em> so multiply it by 8 to get a mega<em>bits</em>-per-second speed. The demo above is running at 11.8mbps due to my laptops network limitation and number of hops...</p>

      </article>

      
        <div class="blog-tags">
          Tags:
          
          
            <a href="/tags#bandwidth testing">bandwidth testing</a>
          
            <a href="/tags#iperf">iperf</a>
          
            <a href="/tags#netstat">netstat</a>
          
            <a href="/tags#network issues">network issues</a>
          
            <a href="/tags#network perfomance">network perfomance</a>
          
            <a href="/tags#network speed">network speed</a>
          
          
        </div>
      

      

      <ul class="pager blog-pager">
        
        <li class="previous">
          <a href="/blog/2017/04/13/jenkins-add-color-to-console-output.html" data-toggle="tooltip" data-placement="top" title="Jenkins – Add Color to Console Output">&larr; Previous Post</a>
        </li>
        
        
        <li class="next">
          <a href="/blog/2017/05/22/repurpose-old-smartphones-for-home-automation-by-turning-sensors-into-signals-paper.html" data-toggle="tooltip" data-placement="top" title="Repurpose Old Smartphones for Home Automation by Turning Sensors into Signals [Paper]">Next Post &rarr;</a>
        </li>
        
      </ul>

      
        <div class="disqus-comments">
          <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'mmphego-github-io';
        /* ensure that pages with query string get the same discussion */
            var url_parts = window.location.href.split("?");
            var disqus_url = url_parts[0];
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
        </div>
      
    </div>
  </div>
</div>

    <footer>
  <div class="container beautiful-jekyll-footer">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
          
          <li>
            <a href="https://github.com/mmphego" title="GitHub">
              <span class="fa-stack fa-lg" aria-hidden="true">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
              </span>
              <span class="sr-only">GitHub</span>
            </a>
          </li>
          
      
    
      
      
      
          <li>
            <a href="https://linkedin.com/in/mphomphego" title="LinkedIn">
              <span class="fa-stack fa-lg" aria-hidden="true">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
              <span class="sr-only">LinkedIn</span>
            </a>
          </li>
          
      
      
          <li>
            <a href="https://stackoverflow.com/users/6165344/mpho-mphego" title="StackOverflow">
              <span class="fa-stack fa-lg" aria-hidden="true">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
              </span>
              <span class="sr-only">StackOverflow</span>
            </a>
          </li>
          
      
      
      
          <li>
            <a href="https://www.youtube.com/xxXMphoXxx" title="YouTube">
              <span class="fa-stack fa-lg" aria-hidden="true">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-youtube fa-stack-1x fa-inverse"></i>
              </span>
              <span class="sr-only">YouTube</span>
            </a>
          </li>
          
      
      
      
          <li>
            <a href="/feed.xml" title="RSS">
              <span class="fa-stack fa-lg" aria-hidden="true">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
              </span>
              <span class="sr-only">RSS</span>
            </a>
          </li>
          
      
      
      
        </ul>
        <p class="copyright text-muted">
      Mpho Mphego
      &nbsp;&bull;&nbsp;
      2018

      
      </p>
          <!-- Please don't remove this, keep my open source work credited :) -->
    <p class="theme-by text-muted">
      Awesome Theme by
      <a href="http://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
    </p>
      </div>
    </div>
  </div>
</footer>
  
    






  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script>
        if (typeof jQuery == 'undefined') {
          document.write('<script src="/js/jquery-1.11.2.min.js"></scr' + 'ipt>');
        }
      </script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
  <script src="/js/bootstrap.min.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
  <script src="/js/main.js"></script>
    
  



	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-68808612-1', 'auto');
		ga('send', 'pageview');
	</script>
	<!-- End Google Analytics -->

  
  </body>
</html>
